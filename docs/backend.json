{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the Sarathi platform.",
      "properties": {
        "portals": {
          "type": "array",
          "description": "An array indicating which portal(s) the user has registered for (e.g., 'victim', 'incentive').",
          "items": {
            "type": "string",
            "enum": ["victim", "incentive"]
          }
        }
      },
      "required": []
    },
    "AtrocityCase": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AtrocityCase",
      "type": "object",
      "description": "Represents an atrocity case for a victim.",
      "properties": {
        "victimId": {
          "type": "string",
          "description": "Reference to User. The UID of the victim from the users collection."
        },
        "firNumber": {
          "type": "string",
          "description": "The First Information Report number."
        },
        "status": {
          "type": "string",
          "description": "The status of the case.",
          "enum": [
            "Submitted",
            "Investigation in Progress",
            "Chargesheet Filed",
            "Trial in Progress",
            "Completed"
          ]
        },
        "offenseDetails": {
          "type": "string",
          "description": "Details describing the nature of the crime."
        },
        "reliefEntitlement": {
          "type": "object",
          "properties": {
            "totalAmount": {
              "type": "number"
            },
            "nonMonetary": {
              "type": "string"
            }
          }
        },
        "paymentStages": {
          "type": "array",
          "description": "An array of payment stages.",
          "items": {
            "type": "object",
            "properties": {
              "stageName": {
                "type": "string"
              },
              "amount": {
                "type": "number"
              },
              "status": {
                "type": "string",
                "enum": ["Pending", "Approved", "Disbursed"]
              }
            }
          }
        },
        "documents": {
          "type": "array",
          "description": "An array of documents related to the case.",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "storageUrl": {
                "type": "string"
              }
            }
          }
        },
        "timelineEvents": {
          "type": "array",
          "description": "An array of timeline events to track case history.",
          "items": {
            "type": "object",
            "properties": {
              "date": {
                "type": "string",
                "format": "date-time"
              },
              "title": {
                "type": "string"
              },
              "description": {
                "type": "string"
              }
            }
          }
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp of when the case was created.",
          "format": "date-time"
        }
      },
      "required": ["victimId", "status", "createdAt"]
    },
    "MarriageIncentive": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "MarriageIncentive",
      "type": "object",
      "description": "Represents an incentive application for an inter-caste marriage.",
      "properties": {
        "applicantUids": {
          "type": "array",
          "description": "An array of two user UIDs representing the applicants.",
          "items": {
            "type": "string"
          },
          "maxItems": 2,
          "minItems": 2
        },
        "status": {
          "type": "string",
          "description": "The status of the application.",
          "enum": [
            "Submitted",
            "Documents Verified",
            "Approved",
            "Disbursed",
            "Rejected"
          ]
        },
        "documents": {
          "type": "object",
          "properties": {
            "marriageCertificateUrl": { "type": "string" },
            "partner1CasteCertificateUrl": { "type": "string" },
            "partner2CasteCertificateUrl": { "type": "string" }
          }
        },
        "paymentStatus": {
          "type": "string",
          "description": "The status of the payment.",
          "enum": ["Pending", "Processed"]
        },
        "rejectionReason": {
          "type": "string",
          "description": "The reason for rejection (optional)."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp of when the application was created.",
          "format": "date-time"
        }
      },
      "required": ["applicantUids", "status", "createdAt"]
    },
    "Grievance": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Grievance",
      "type": "object",
      "description": "Represents a grievance filed by a victim.",
      "properties": {
        "complainantId": {
          "type": "string",
          "description": "The UID of the user who filed the grievance."
        },
        "relatedCaseId": {
          "type": "string",
          "description": "The document ID from the atrocity_cases collection."
        },
        "grievanceDetails": {
          "type": "string",
          "description": "Details of the grievance."
        },
        "status": {
          "type": "string",
          "description": "The status of the grievance.",
          "enum": ["Open", "In Review", "Resolved"]
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp of when the grievance was created.",
          "format": "date-time"
        }
      },
      "required": ["complainantId", "relatedCaseId", "status", "createdAt"]
    }
  },
  "auth": {
    "providers": [
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/entities/User"
          },
          "description": "Stores user authentication information. Document ID is the Firebase Auth UID."
        }
      },
      {
        "path": "/atrocity_cases/{caseId}",
        "definition": {
          "entityName": "AtrocityCase",
          "schema": {
            "$ref": "#/entities/AtrocityCase"
          },
          "description": "Stores details related to an atrocity case."
        }
      },
      {
        "path": "/marriage_incentives/{incentiveId}",
        "definition": {
          "entityName": "MarriageIncentive",
          "schema": {
            "$ref": "#/entities/MarriageIncentive"
          },
          "description": "Stores details for the inter-caste marriage incentive scheme."
        }
      },
      {
        "path": "/grievances/{grievanceId}",
        "definition": {
          "entityName": "Grievance",
          "schema": {
            "$ref": "#/entities/Grievance"
          },
          "description": "Stores grievances filed by victims."
        }
      }
    ]
  }
}
